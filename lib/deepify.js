!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.deepify=t():e.deepify=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=50)}({15:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.emptyArrayRegxp=/\[\]$/,t.indexArrayRegxp=/\[\d+\]$/,t.indexArrayRefRegxp=/\[\d+\]\[\]$/,t.numberRegex=/^\d+$/,t.arrayBrackets=/[\[\]]/gi},40:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIndexFromPropName=void 0;var n=r(15);t.getIndexFromPropName=function(e){return parseInt([].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e.match(n.indexArrayRegxp)))[0].replace(n.arrayBrackets,""),10)}},43:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setProperty=t.deepCopy=t.isMutable=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(15),i=r(40);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.isMutable=function(e,t){return"boolean"==typeof e?e:!(!t||"boolean"!=typeof t.mutate)&&t.mutate},t.deepCopy=function(e){return null!==e&&void 0!==e&&"object"===(void 0===e?"undefined":n(e))?JSON.parse(JSON.stringify(e)):null},t.setProperty=function(e,t,r){if(!("string"==typeof t&&t.length>0))throw"propertyName must be a string and lenght > 0";var n=t.split("."),a=n.length,f=e;n.forEach(function(e,t){if(t+1===a)if(e.match(o.emptyArrayRegxp))f=function(e,t,r){var n=Object.assign(e),i=t.replace(o.emptyArrayRegxp,"");return n[i]=[],void 0!==r&&n[i].push(r),n=n[i]}(f,e,r);else if(e.match(o.indexArrayRegxp))f=function(e,t,r){var n=Object.assign(e),u=(0,i.getIndexFromPropName)(t),a=t.replace(o.indexArrayRegxp,"");return n[a]instanceof Array?u>n[a].lenght?n[a].push(r):n[a].splice(u,0,r):n[a]=[r],n}(f,e,r);else if(f instanceof Array){var n=u({},e,r);f.push(n)}else f[e]=r;else if(f&&f.hasOwnProperty(e))f=f[e];else if(e.match(o.emptyArrayRegxp))f=function(e,t){var r=Object.assign(e),n=t.replace(o.emptyArrayRegxp,"");return r[n]=[],r=r[n]}(f,e);else if(e.match(o.indexArrayRegxp))f=function(e,t){var r=Object.assign(e),n=(0,i.getIndexFromPropName)(t),u=t.replace(o.indexArrayRegxp,""),a={};if(r[u]instanceof Array){if(n>r[u].lenght)return r[u].push(a),a;var f=r[u][n];return void 0!==f?f:(e[u].splice(n,0,a),a)}return r[u]=[a],a}(f,e);else if(f instanceof Array){var p=u({},e,{});f.push(p),f=p[e]}else f[e]={},f=f[e]})}},47:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProperty=t.getArrayRef=t.getArrayAtPosition=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(15),i=r(40),u=t.getArrayAtPosition=function(e,t){var r=(0,i.getIndexFromPropName)(t),n=t.replace(o.indexArrayRegxp,"");if(e[n]instanceof Array&&e[n].length>0&&r<=e[n].length)return e[n][r]},a=t.getArrayRef=function(e,t){var r=t.replace(o.emptyArrayRegxp,"");return u(e,r)};t.getProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null===e||void 0===e)return null;var r=t.split(".");if("object"===(void 0===e?"undefined":n(e))&&e instanceof Array==!1){var i=e;return r.forEach(function(e){i=void 0!==i&&!1===i.hasOwnProperty(e)&&e.match(o.indexArrayRegxp)?u(i,e):void 0!==i&&e.match(o.indexArrayRefRegxp)?a(i,e):void 0!==i&&i.hasOwnProperty(e)?i[e]:void 0}),i}}},48:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepifyGet=void 0;var n=r(47);t.deepifyGet=function(e,t){return(0,n.getProperty)(e,t)}},49:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepifySet=void 0;var n=r(43),o={mutate:!1,configure:function(e){this.mutate=e}};t.deepifySet=function(e,t,r,i){if("string"==typeof t&&t.length>0){var u=(0,n.isMutable)(i,o)?e:(0,n.deepCopy)(e);return null!==u&&(0,n.setProperty)(u,t,r),u}return e}},50:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepifyGet=t.deepifySet=void 0;var n=r(49),o=r(48);t.deepifySet=n.deepifySet,t.deepifyGet=o.deepifyGet}})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWVwaWZ5L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9kZWVwaWZ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2RlZXBpZnkvLi9zcmMvc2hhcmVkL3JlZ2V4LmV4cHJlc3Npb25zLmpzIiwid2VicGFjazovL2RlZXBpZnkvLi9zcmMvc2hhcmVkL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vZGVlcGlmeS8uL3NyYy9zZXQvc2V0LmhlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vZGVlcGlmeS8uL3NyYy9nZXQvZ2V0LmhlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vZGVlcGlmeS8uL3NyYy9kZWVwaWZ5R2V0LmpzIiwid2VicGFjazovL2RlZXBpZnkvLi9zcmMvZGVlcGlmeVNldC5qcyIsIndlYnBhY2s6Ly9kZWVwaWZ5Ly4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZW1wdHlBcnJheVJlZ3hwIiwiaW5kZXhBcnJheVJlZ3hwIiwiaW5kZXhBcnJheVJlZlJlZ3hwIiwibnVtYmVyUmVnZXgiLCJhcnJheUJyYWNrZXRzIiwiX3JlZ2V4IiwiZ2V0SW5kZXhGcm9tUHJvcE5hbWUiLCJwcm9wZXJ0eU5hbWUiLCJwYXJzZUludCIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsIm1hdGNoIiwicmVwbGFjZSIsIl9oZWxwZXJzIiwiaXNNdXRhYmxlIiwibXV0YXRlIiwicmVmIiwiZGVlcENvcHkiLCJvYmpSZWYiLCJfdHlwZW9mIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Iiwic2V0UHJvcGVydHkiLCJsZW5ndGgiLCJuZXN0ZWRQcm9wcyIsInNwbGl0IiwidG9wIiwiX3JlZiIsImZvckVhY2giLCJwcm9wIiwiaW5kZXgiLCJhc3NpZ24iLCJwcm9wTmFtZSIsInB1c2giLCJzZXRFbXB0eUFycmF5IiwicHJvcEluZGV4IiwiY2xlYW5Qcm9wTmFtZSIsIkFycmF5IiwibGVuZ2h0Iiwic3BsaWNlIiwic2V0QXJyYXlBdFBvc2l0aW9uIiwiZWxlbWVudCIsInNldEVtcHR5QXJyYXlSZWZlcmVuY2UiLCJuZXdSZWYiLCJjdXJyZW50UmVmIiwic2V0QXJyYXlSZWZlcmVuY2VBdFBvc2l0aW9uIiwiZ2V0QXJyYXlBdFBvc2l0aW9uIiwiZ2V0QXJyYXlSZWYiLCJhcnJheVByb3BlcnR5IiwiZ2V0UHJvcGVydHkiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJwcm9wcyIsIl9nZXQiLCJkZWVwaWZ5R2V0Iiwib2JqIiwiX3NldCIsImRlZXBpZnlDb25maWd1cmF0aW9uIiwiY29uZmlndXJlIiwiZGVlcGlmeVNldCIsIl9kZWVwaWZ5U2V0IiwiX2RlZXBpZnlHZXQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsUUFBQUQsSUFFQUQsRUFBQSxRQUFBQyxJQVJBLENBU0Msb0JBQUFLLFVBQUFDLEtBQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVB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MEdDSDFCLElBQUEyQixFQUFBcEYsRUFBQSxJQUVNcUYsR0FDSjNDLFFBQVEsRUFDUjRDLFVBQVcsU0FBUzVDLEdBQ2xCNUMsS0FBSzRDLE9BQVNBLElBSUw2QyxhQUFhLFNBQUMxQyxFQUFRdkIsRUFBVUosRUFBT3dCLEdBQ2xELEdBQXdCLGlCQUFicEIsR0FBeUJBLEVBQVM2QixPQUFTLEVBQUcsQ0FDdkQsSUFBTVIsR0FBTSxFQUFBeUMsRUFBQTNDLFdBQVVDLEVBQVEyQyxHQUF3QnhDLEdBQVMsRUFBQXVDLEVBQUF4QyxVQUFTQyxHQUl4RSxPQUhZLE9BQVJGLElBQ0YsRUFBQXlDLEVBQUFsQyxhQUFZUCxFQUFLckIsRUFBVUosR0FFdEJ5QixFQUVULE9BQU9FLHNIQ2pCVCxJQUFBMkMsRUFBQXhGLEVBQUEsSUFDQXlGLEVBQUF6RixFQUFBLElBRWF1RiwwQkFDQUwiLCJmaWxlIjoibGliL2RlZXBpZnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJkZWVwaWZ5XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImRlZXBpZnlcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1MCk7XG4iLCJleHBvcnQgY29uc3QgZW1wdHlBcnJheVJlZ3hwID0gL1xcW1xcXSQvO1xuZXhwb3J0IGNvbnN0IGluZGV4QXJyYXlSZWd4cCA9IC9cXFtcXGQrXFxdJC87XG5leHBvcnQgY29uc3QgaW5kZXhBcnJheVJlZlJlZ3hwID0gL1xcW1xcZCtcXF1cXFtcXF0kLztcbmV4cG9ydCBjb25zdCBudW1iZXJSZWdleCA9IC9eXFxkKyQvO1xuZXhwb3J0IGNvbnN0IGFycmF5QnJhY2tldHMgPSAvW1xcW1xcXV0vZ2k7XG4iLCJpbXBvcnQgeyBpbmRleEFycmF5UmVneHAsIGFycmF5QnJhY2tldHMgfSBmcm9tICcuL3JlZ2V4LmV4cHJlc3Npb25zJztcblxuZXhwb3J0IGNvbnN0IGdldEluZGV4RnJvbVByb3BOYW1lID0gKHByb3BlcnR5TmFtZSkgPT4gcGFyc2VJbnQoWy4uLnByb3BlcnR5TmFtZS5tYXRjaChpbmRleEFycmF5UmVneHApXVswXS5yZXBsYWNlKGFycmF5QnJhY2tldHMsICcnKSwgMTApO1xuIiwiaW1wb3J0IHsgZW1wdHlBcnJheVJlZ3hwLCBpbmRleEFycmF5UmVneHAsIG51bWJlclJlZ2V4LCBhcnJheUJyYWNrZXRzIH0gZnJvbSAnLi4vc2hhcmVkL3JlZ2V4LmV4cHJlc3Npb25zJztcbmltcG9ydCB7IGdldEluZGV4RnJvbVByb3BOYW1lIH0gZnJvbSAnLi4vc2hhcmVkL2hlbHBlcnMnO1xuXG5leHBvcnQgY29uc3QgaXNNdXRhYmxlID0gKG11dGF0ZSwgcmVmKSA9PiB7XG4gIGlmICh0eXBlb2YgbXV0YXRlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gbXV0YXRlO1xuICB9IGVsc2UgaWYocmVmICYmIHR5cGVvZiByZWYubXV0YXRlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gcmVmLm11dGF0ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5leHBvcnQgY29uc3QgZGVlcENvcHkgPSAob2JqUmVmKSA9PlxuICBvYmpSZWYgIT09IG51bGwgJiZcbiAgdHlwZW9mIG9ialJlZiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgdHlwZW9mIG9ialJlZiA9PT0gJ29iamVjdCcgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9ialJlZikpIDogbnVsbDtcblxuY29uc3Qgc2V0RW1wdHlBcnJheSA9IChyZWYsIHByb3BlcnR5TmFtZSwgdmFsdWUpID0+IHtcbiAgbGV0IF9yZWYgPSBPYmplY3QuYXNzaWduKHJlZik7XG4gIGNvbnN0IHByb3BOYW1lID0gcHJvcGVydHlOYW1lLnJlcGxhY2UoZW1wdHlBcnJheVJlZ3hwLCAnJyk7XG4gIF9yZWZbcHJvcE5hbWVdID0gW107XG4gIGlmKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBfcmVmW3Byb3BOYW1lXS5wdXNoKHZhbHVlKTtcbiAgfVxuICBfcmVmID0gX3JlZltwcm9wTmFtZV07XG4gIHJldHVybiBfcmVmO1xufTtcblxuY29uc3Qgc2V0RW1wdHlBcnJheVJlZmVyZW5jZSA9IChyZWYsIHByb3BlcnR5TmFtZSkgPT4ge1xuICAvLyB0aGlzIG1ldGhvZCBpcyBub3QgcmV0dXJuaWduIHRoZSByaWdodCByZWZlcmVuY2VcbiAgbGV0IF9yZWYgPSBPYmplY3QuYXNzaWduKHJlZik7XG4gIGNvbnN0IHByb3BOYW1lID0gcHJvcGVydHlOYW1lLnJlcGxhY2UoZW1wdHlBcnJheVJlZ3hwLCAnJyk7XG4gIF9yZWZbcHJvcE5hbWVdID0gW107XG4gIF9yZWYgPSBfcmVmW3Byb3BOYW1lXTtcbiAgcmV0dXJuIF9yZWY7XG59O1xuXG5cbmNvbnN0IHNldEFycmF5QXRQb3NpdGlvbiA9IChyZWYsIHByb3BlcnR5TmFtZSwgdmFsdWUpID0+IHtcbiAgbGV0IF9yZWYgPSBPYmplY3QuYXNzaWduKHJlZik7XG4gIGNvbnN0IHByb3BJbmRleCA9IGdldEluZGV4RnJvbVByb3BOYW1lKHByb3BlcnR5TmFtZSk7XG4gIGNvbnN0IGNsZWFuUHJvcE5hbWUgPSBwcm9wZXJ0eU5hbWUucmVwbGFjZShpbmRleEFycmF5UmVneHAsICcnKTtcbiAgIGlmKF9yZWZbY2xlYW5Qcm9wTmFtZV0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICBpZihwcm9wSW5kZXggPiBfcmVmW2NsZWFuUHJvcE5hbWVdLmxlbmdodCkge1xuICAgICAgIF9yZWZbY2xlYW5Qcm9wTmFtZV0ucHVzaCh2YWx1ZSk7XG4gICAgIH0gZWxzZSB7XG4gICAgICAgX3JlZltjbGVhblByb3BOYW1lXS5zcGxpY2UocHJvcEluZGV4LCAwLCB2YWx1ZSk7XG4gICAgIH1cbiAgIH0gZWxzZSB7XG4gICAgIF9yZWZbY2xlYW5Qcm9wTmFtZV0gPSBbdmFsdWVdO1xuICAgfVxuICAgcmV0dXJuIF9yZWY7XG59O1xuXG5jb25zdCBzZXRBcnJheVJlZmVyZW5jZUF0UG9zaXRpb24gPSAocmVmLCBwcm9wZXJ0eU5hbWUpID0+IHtcbiAgbGV0IF9yZWYgPSBPYmplY3QuYXNzaWduKHJlZik7XG4gIGNvbnN0IHByb3BJbmRleCA9IGdldEluZGV4RnJvbVByb3BOYW1lKHByb3BlcnR5TmFtZSk7XG4gIGNvbnN0IGNsZWFuUHJvcE5hbWUgPSBwcm9wZXJ0eU5hbWUucmVwbGFjZShpbmRleEFycmF5UmVneHAsICcnKTtcbiAgY29uc3QgbmV3UmVmID0ge307XG4gIGlmKF9yZWZbY2xlYW5Qcm9wTmFtZV0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIGlmKHByb3BJbmRleCA+IF9yZWZbY2xlYW5Qcm9wTmFtZV0ubGVuZ2h0KSB7XG4gICAgICBfcmVmW2NsZWFuUHJvcE5hbWVdLnB1c2gobmV3UmVmKTtcbiAgICAgIHJldHVybiBuZXdSZWY7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qX3JlZltjbGVhblByb3BOYW1lXS5zcGxpY2UocHJvcEluZGV4LCAwLCBuZXdSZWYpO1xuICAgICAgcmV0dXJuIG5ld1JlZjsqL1xuICAgICAgY29uc3QgY3VycmVudFJlZiA9IF9yZWZbY2xlYW5Qcm9wTmFtZV1bcHJvcEluZGV4XTtcbiAgICAgIGlmKHR5cGVvZiBjdXJyZW50UmVmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gY3VycmVudFJlZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZltjbGVhblByb3BOYW1lXS5zcGxpY2UocHJvcEluZGV4LCAwLCBuZXdSZWYpO1xuICAgICAgICByZXR1cm4gbmV3UmVmO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBfcmVmW2NsZWFuUHJvcE5hbWVdID0gW25ld1JlZl07XG4gICAgcmV0dXJuIG5ld1JlZjtcbiAgfVxuICByZXR1cm4gbmV3UmVmO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldFByb3BlcnR5ID0gKHJlZiwgcHJvcGVydHlOYW1lLCB2YWx1ZSkgPT4ge1xuICBpZiAodHlwZW9mIHByb3BlcnR5TmFtZSA9PT0gJ3N0cmluZycgJiYgcHJvcGVydHlOYW1lLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBuZXN0ZWRQcm9wcyA9IHByb3BlcnR5TmFtZS5zcGxpdCgnLicpO1xuICAgIGNvbnN0IHRvcCA9IG5lc3RlZFByb3BzLmxlbmd0aDtcbiAgICBsZXQgX3JlZiA9IHJlZjtcblxuICAgIG5lc3RlZFByb3BzLmZvckVhY2goKHByb3AsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmKChpbmRleCsxKSA9PT0gdG9wKSB7XG4gICAgICAgICAgaWYgKHByb3AubWF0Y2goZW1wdHlBcnJheVJlZ3hwKSkge1xuICAgICAgICAgICAgX3JlZiA9IHNldEVtcHR5QXJyYXkoX3JlZiwgcHJvcCwgdmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSBpZihwcm9wLm1hdGNoKGluZGV4QXJyYXlSZWd4cCkpIHtcbiAgICAgICAgICAgIF9yZWYgPSBzZXRBcnJheUF0UG9zaXRpb24oX3JlZiwgcHJvcCwgdmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoX3JlZiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB7XG4gICAgICAgICAgICAgICAgW3Byb3BdOiB2YWx1ZVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBfcmVmLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBfcmVmW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmKF9yZWYgJiYgX3JlZi5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgX3JlZiA9IF9yZWZbcHJvcF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm9wLm1hdGNoKGVtcHR5QXJyYXlSZWd4cCkpIHtcbiAgICAgICAgICAgICAgX3JlZiA9IHNldEVtcHR5QXJyYXlSZWZlcmVuY2UoX3JlZiwgcHJvcCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYocHJvcC5tYXRjaChpbmRleEFycmF5UmVneHApKSB7XG4gICAgICAgICAgICAgICBfcmVmID0gc2V0QXJyYXlSZWZlcmVuY2VBdFBvc2l0aW9uKF9yZWYsIHByb3ApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYoX3JlZiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHtcbiAgICAgICAgICAgICAgICAgIFtwcm9wXTp7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX3JlZi5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIF9yZWYgPSBlbGVtZW50W3Byb3BdO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9yZWZbcHJvcF0gPSB7fTtcbiAgICAgICAgICAgICAgICBfcmVmID0gX3JlZltwcm9wXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgJ3Byb3BlcnR5TmFtZSBtdXN0IGJlIGEgc3RyaW5nIGFuZCBsZW5naHQgPiAwJztcbiAgfVxufTtcbiIsImltcG9ydCB7IGVtcHR5QXJyYXlSZWd4cCwgaW5kZXhBcnJheVJlZlJlZ3hwLCBpbmRleEFycmF5UmVneHAsIG51bWJlclJlZ2V4LCBhcnJheUJyYWNrZXRzIH0gZnJvbSAnLi4vc2hhcmVkL3JlZ2V4LmV4cHJlc3Npb25zJztcbmltcG9ydCB7IGdldEluZGV4RnJvbVByb3BOYW1lIH0gZnJvbSAnLi4vc2hhcmVkL2hlbHBlcnMnO1xuXG5leHBvcnQgY29uc3QgZ2V0QXJyYXlBdFBvc2l0aW9uID0gKHJlZiwgcHJvcGVydHlOYW1lKSA9PiB7XG4gIGNvbnN0IHByb3BJbmRleCA9IGdldEluZGV4RnJvbVByb3BOYW1lKHByb3BlcnR5TmFtZSk7XG4gIGNvbnN0IGNsZWFuUHJvcE5hbWUgPSBwcm9wZXJ0eU5hbWUucmVwbGFjZShpbmRleEFycmF5UmVneHAsICcnKTtcblxuICBpZihyZWZbY2xlYW5Qcm9wTmFtZV0gaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgIHJlZltjbGVhblByb3BOYW1lXS5sZW5ndGggPiAwICYmXG4gICAgcHJvcEluZGV4IDw9IHJlZltjbGVhblByb3BOYW1lXS5sZW5ndGhcbiAgICkge1xuICAgICByZXR1cm4gcmVmW2NsZWFuUHJvcE5hbWVdW3Byb3BJbmRleF07XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRBcnJheVJlZiA9IChyZWYsIHByb3BlcnR5TmFtZSkgPT4ge1xuICBjb25zdCBhcnJheVByb3BlcnR5ID0gcHJvcGVydHlOYW1lLnJlcGxhY2UoZW1wdHlBcnJheVJlZ3hwLCAnJyk7XG4gIHJldHVybiBnZXRBcnJheUF0UG9zaXRpb24ocmVmLCBhcnJheVByb3BlcnR5KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRQcm9wZXJ0eSA9IChyZWYsIHByb3BlcnR5TmFtZSA9ICcnKSA9PiB7XG4gIGlmKHJlZiA9PT0gbnVsbCB8fCB0eXBlb2YgcmVmID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHByb3BzID0gcHJvcGVydHlOYW1lLnNwbGl0KCcuJyk7XG5cbiAgaWYgKHR5cGVvZiByZWYgPT09ICdvYmplY3QnICYmIChyZWYgaW5zdGFuY2VvZiBBcnJheSkgPT09IGZhbHNlKSB7XG4gICAgbGV0IF9yZWYgPSByZWY7XG4gICAgLy8gcGVuZGluZyBpbXBvcnRhbnQgY2hhbmdlLlxuICAgIC8vIGFzIHNvb24gYXMgd2UgaGl0IHVuZGVmaW5lZCB3ZSBzaG91bGQgZXhpdCB0aGUgbG9vcC5cbiAgICBwcm9wcy5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgICBpZih0eXBlb2YgX3JlZiAhPT0gJ3VuZGVmaW5lZCcgJiYgX3JlZi5oYXNPd25Qcm9wZXJ0eShwcm9wKSA9PT0gZmFsc2UgJiYgcHJvcC5tYXRjaChpbmRleEFycmF5UmVneHApKSB7XG4gICAgICAgIF9yZWYgPSBnZXRBcnJheUF0UG9zaXRpb24oX3JlZiwgcHJvcCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfcmVmICE9PSAndW5kZWZpbmVkJyAmJiBwcm9wLm1hdGNoKGluZGV4QXJyYXlSZWZSZWd4cCkpIHtcbiAgICAgICAgX3JlZiA9IGdldEFycmF5UmVmKF9yZWYsIHByb3ApO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3JlZiAhPT0gJ3VuZGVmaW5lZCcgJiYgX3JlZi5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICBfcmVmID0gX3JlZltwcm9wXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9yZWYgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIF9yZWY7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBnZXRQcm9wZXJ0eSB9IGZyb20gJy4vZ2V0L2dldC5oZWxwZXJzJztcbi8vIG1ha2UgYSBsb2cgYXZhaWxhYmxlIGZvciBkZWJidWdpbmdcbmV4cG9ydCBjb25zdCBkZWVwaWZ5R2V0ID0gKG9iaiwgcHJvcCkgPT4ge1xuICByZXR1cm4gZ2V0UHJvcGVydHkob2JqLCBwcm9wKTtcbn07XG4iLCJpbXBvcnQgeyBpc011dGFibGUsIGRlZXBDb3B5LCBzZXRQcm9wZXJ0eSB9IGZyb20gJy4vc2V0L3NldC5oZWxwZXJzJztcblxuY29uc3QgZGVlcGlmeUNvbmZpZ3VyYXRpb24gPSB7XG4gIG11dGF0ZTogZmFsc2UsXG4gIGNvbmZpZ3VyZTogZnVuY3Rpb24obXV0YXRlKSB7XG4gICAgdGhpcy5tdXRhdGUgPSBtdXRhdGU7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkZWVwaWZ5U2V0ID0gKG9ialJlZiwgcHJvcGVydHksIHZhbHVlLCBtdXRhdGUpID0+IHtcbiAgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ3N0cmluZycgJiYgcHJvcGVydHkubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHJlZiA9IGlzTXV0YWJsZShtdXRhdGUsIGRlZXBpZnlDb25maWd1cmF0aW9uKSA/IG9ialJlZiA6IGRlZXBDb3B5KG9ialJlZik7XG4gICAgaWYgKHJlZiAhPT0gbnVsbCkge1xuICAgICAgc2V0UHJvcGVydHkocmVmLCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVmO1xuICB9XG4gIHJldHVybiBvYmpSZWY7XG59O1xuIiwiaW1wb3J0IHsgZGVlcGlmeVNldCBhcyBfc2V0IH0gZnJvbSAnLi9kZWVwaWZ5U2V0JztcbmltcG9ydCB7IGRlZXBpZnlHZXQgYXMgX2dldCB9IGZyb20gJy4vZGVlcGlmeUdldCc7XG5cbmV4cG9ydCBjb25zdCBkZWVwaWZ5U2V0ID0gX3NldDtcbmV4cG9ydCBjb25zdCBkZWVwaWZ5R2V0ID0gX2dldDtcbiJdLCJzb3VyY2VSb290IjoiIn0=